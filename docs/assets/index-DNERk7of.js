(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const T="https://wnwftbamyaotqdsivmas.supabase.co",A="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indud2Z0YmFteWFvdHFkc2l2bWFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1OTY0OTcsImV4cCI6MjA3OTE3MjQ5N30.r8Fh7FUYOnUQHboqfKI1eb_37NLuAn3gRLbH8qUPpMo";let c,I=[];try{if(!window.supabase)throw new Error("Librer铆a Supabase no encontrada.");c=window.supabase.createClient(T,A)}catch(t){console.error("Error Fatal: Supabase no inicializ贸.",t),document.getElementById("auth-container").style.display="flex",document.getElementById("main-app-content").style.display="none"}function b(t){const e=document.getElementById(t);e&&(e.classList.remove("hidden"),e.classList.add("flex"))}function v(t){const e=document.getElementById(t);if(e){e.classList.add("hidden"),e.classList.remove("flex");const r=e.querySelector("form");if(r&&r.reset(),t==="new-sale-modal"){const n=document.getElementById("sale-total-amount"),a=document.getElementById("sale-debt-display");n&&(n.textContent=g(0)),a&&(a.textContent=g(0));const o=document.getElementById("subproduct-select");o&&(o.innerHTML='<option value="" data-price="0" disabled selected>Seleccione Principal primero</option>',o.disabled=!0);const l=document.getElementById("main-product-select");l&&l.removeEventListener("change",M)}}}function g(t){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(t)}async function q(){const t=document.getElementById("main-app-content"),e=document.getElementById("auth-container");if(!c||!t||!e){e&&(e.style.display="flex");return}const{data:{session:r},error:n}=await c.auth.getSession();n||!r?(e.style.display="flex",t.style.display="none"):(e.style.display="none",t.style.display="block",B())}async function D(t){t.preventDefault();const e=document.getElementById("email").value,r=document.getElementById("password").value,{error:n}=await c.auth.signInWithPassword({email:e,password:r});n?alert(n.message):q()}async function P(){const{error:t}=await c.auth.signOut();t&&console.error("Error al cerrar sesi贸n:",t),q()}async function B(){await N(),await H(),await O()}async function N(){const t=document.getElementById("total-clients"),e=document.getElementById("total-sales"),r=document.getElementById("total-debt");if(!t||!e||!r)return;const{count:n,error:a}=await c.from("clientes").select("client_id",{count:"exact",head:!0});a?t.textContent="Error":t.textContent=n;const{data:o,error:l}=await c.from("ventas").select("total_amount, paid_amount");if(l){console.error("Error al cargar ventas para totales:",l),e.textContent="Error",r.textContent="Error";return}let i=0,s=0;o.forEach(m=>{const y=parseFloat(m.total_amount)||0,d=parseFloat(m.paid_amount)||0;i+=y,s+=d});const u=i-s;e.textContent=g(i),r.textContent=g(u)}async function H(){const t=document.getElementById("debts-table-body");if(!t)return;t.innerHTML='<tr><td colspan="4" class="p-3 text-center text-gray-500">Cargando deudas...</td></tr>';const{data:e,error:r}=await c.from("ventas").select(`
            venta_id, 
            total_amount, 
            paid_amount,
            created_at,
clientes!ventas_client_id_fkey (name)
        `).order("created_at",{ascending:!1});if(r){console.error("Error al cargar ventas:",r),t.innerHTML=`<tr><td colspan="4" class="p-3 text-center text-red-500">Error: ${r.message}.</td></tr>`;return}const n=e.filter(a=>{const o=parseFloat(a.total_amount)||0,l=parseFloat(a.paid_amount)||0;return o>l});if(n.length===0){t.innerHTML='<tr><td colspan="4" class="p-3 text-center text-gray-500">No hay deudas pendientes.</td></tr>';return}t.innerHTML=n.map(a=>{var m;const o=parseFloat(a.total_amount)||0,l=parseFloat(a.paid_amount)||0,i=o-l,s=((m=a["clientes!ventas_client_id_fkey"])==null?void 0:m.name)||"Cliente Desconocido",u=new Date(a.created_at).toLocaleDateString();return`
            <tr>
                <td class="px-6 py-4 whitespace-nowrap">${s} (Venta #${a.venta_id})</td>
                <td class="px-6 py-4 whitespace-nowrap text-red-600 font-bold">${g(i)}</td>
                <td class="px-6 py-4 whitespace-nowrap">${u}</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <button class="text-indigo-600 hover:text-indigo-800 text-sm pay-debt-btn" data-sale-id="${a.venta_id}">
                        Pagar
                    </button>
                </td>
            </tr>
        `}).join(""),document.querySelectorAll(".pay-debt-btn").forEach(a=>{a.addEventListener("click",o=>{const l=o.currentTarget.dataset.saleId;Y(l)})})}async function O(){const t=document.getElementById("clients-table-body");if(!t)return;const{data:e,error:r}=await c.from("clientes").select("client_id, name, contact").order("name",{ascending:!0});if(r){t.innerHTML=`<tr><td colspan="3" class="p-3 text-center text-red-500">Error al cargar clientes: ${r.message}</td></tr>`;return}if(e.length===0){t.innerHTML='<tr><td colspan="3" class="p-3 text-center text-gray-500">No hay clientes registrados.</td></tr>';return}t.innerHTML=e.map(n=>`
        <tr>
            <td class="px-6 py-4 whitespace-nowrap font-medium">${n.name}</td>
            <td class="px-6 py-4 whitespace-nowrap">${n.contact||"N/A"}</td>
            <td class="px-6 py-4 whitespace-nowrap">
                <button class="text-indigo-600 hover:text-indigo-800 text-sm view-client-btn" data-client-id="${n.client_id}">
                    Ver Deuda
                </button>
            </td>
        </tr>
    `).join("")}async function C(){const t=document.getElementById("sale-client-select");if(!t)return;t.innerHTML='<option value="" disabled selected>Cargando clientes...</option>';const{data:e,error:r}=await c.from("clientes").select("client_id, name").eq("is_active",!0).order("name",{ascending:!0});if(r)throw console.error("Error al cargar clientes:",r),t.innerHTML='<option value="" disabled selected>Error al cargar clientes</option>',new Error(`Fallo la carga de clientes: ${r.message}`);t.innerHTML='<option value="" disabled selected>Seleccione un cliente</option>',e.forEach(n=>{const a=document.createElement("option");a.value=n.client_id,a.textContent=n.name,t.appendChild(a)})}async function k(){if(I.length>0)return;const{data:t,error:e}=await c.from("productos").select("producto_id, name, price, type, parent_product").order("name",{ascending:!0});if(e)throw console.error("Error al cargar productos para select:",e),new Error("Fallo la carga de productos/paquetes");I=t}async function $(){const t=document.getElementById("admin-clients-table-body");if(!t)return;t.innerHTML='<tr><td colspan="4" class="p-3 text-center text-gray-500">Cargando clientes...</td></tr>';const{data:e,error:r}=await c.from("clientes").select("*").order("name",{ascending:!0});if(r){console.error("Error al cargar clientes:",r),t.innerHTML=`<tr><td colspan="4" class="p-3 text-center text-red-500">Error: ${r.message}</td></tr>`;return}if(e.length===0){t.innerHTML='<tr><td colspan="4" class="p-3 text-center text-gray-500">No hay clientes registrados.</td></tr>';return}t.innerHTML=e.map(n=>{const a=n.is_active?"Activo":"Inactivo",o=n.is_active?"text-green-600":"text-red-600",l=n.is_active?"Inhabilitar":"Habilitar",i=n.is_active?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800",s=`
            <button class="text-gray-400 hover:text-red-500 text-sm delete-client-perm-btn ml-3" 
                    data-client-id="${n.client_id}" 
                    data-client-name="${n.name}">
                <i class="fas fa-trash"></i> Borrar Definitivo
            </button>
        `;return`
            <tr>
                <td class="px-6 py-4 whitespace-nowrap font-medium">${n.name}</td>
                <td class="px-6 py-4 whitespace-nowrap">${n.phone||"N/A"}</td>
                <td class="px-6 py-4 whitespace-nowrap"><span class="${o} font-semibold">${a}</span></td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <button class="text-indigo-600 hover:text-indigo-800 text-sm edit-client-btn" data-client-id="${n.client_id}">
                        <i class="fas fa-edit"></i> Editar
                    </button>
                    <button class="${i} text-sm toggle-active-btn ml-3" data-client-id="${n.client_id}" data-is-active="${n.is_active}">
                        <i class="fas fa-toggle-on"></i> ${l}
                    </button>
                    ${s} 
                </td>
            </tr>
        `}).join(""),document.querySelectorAll(".edit-client-btn").forEach(n=>{n.addEventListener("click",a=>{const o=a.currentTarget.dataset.clientId;U(o)})}),document.querySelectorAll(".toggle-active-btn").forEach(n=>{n.addEventListener("click",a=>{const o=a.currentTarget.dataset.clientId,l=a.currentTarget.dataset.isActive==="true";Z(o,l)})}),document.querySelectorAll(".delete-client-perm-btn").forEach(n=>{n.addEventListener("click",a=>{const o=a.currentTarget.dataset.clientId,l=a.currentTarget.dataset.clientName;R(o,l)})})}async function R(t,e){if(t&&confirm(` ALERTA CRTICA: 驴Est谩s SEGURO de que deseas eliminar permanentemente a ${e} Y TODO SU HISTORIAL? Esta acci贸n es IRREVERSIBLE y borrar谩 ventas, pagos y el detalle de productos.`))try{const{data:r,error:n}=await c.from("ventas").select("venta_id").eq("client_id",t);if(n)throw n;const a=r.map(s=>s.venta_id);if(a.length>0){console.log("Limpiando detalles de productos...");const{error:s}=await c.from("ventas_productos").delete().in("venta_id",a);if(s)throw s}if(a.length>0){console.log("Limpiando pagos por venta...");const{error:s}=await c.from("pagos").delete().in("venta_id",a);if(s)throw s}console.log("Limpiando pagos por cliente...");const{error:o}=await c.from("pagos").delete().eq("client_id",t);if(o)throw o;console.log("Eliminando ventas...");const{error:l}=await c.from("ventas").delete().eq("client_id",t);if(l)throw l;console.log("Eliminando cliente...");const{error:i}=await c.from("clientes").delete().eq("client_id",t);if(i)throw i;alert(`Cliente ${e} y todo su historial financiero fueron eliminados permanentemente.`),$(),C(),B()}catch(r){console.error("Error al ejecutar el borrado en cascada:",r),alert(`Fallo la eliminaci贸n total del cliente. Por favor, revisa la consola para ver el error. Mensaje: ${r.message}`)}}async function F(){const t=document.getElementById("admin-products-table-body");if(!t)return;t.innerHTML='<tr><td colspan="4" class="p-3 text-center text-gray-500">Cargando productos...</td></tr>';const{data:e,error:r}=await c.from("productos").select("*").order("type",{ascending:!1}).order("name",{ascending:!0});if(r){console.error("Error al cargar productos para la tabla:",r),t.innerHTML=`<tr><td colspan="4" class="p-3 text-center text-red-500">Error al cargar productos: ${r.message}</td></tr>`;return}if(e.length===0){t.innerHTML='<tr><td colspan="4" class="p-3 text-center text-gray-500">No hay productos o paquetes registrados.</td></tr>';return}t.innerHTML=e.map(n=>`
        <tr>
            <td class="px-6 py-4 whitespace-nowrap font-medium">${n.name}</td>
            <td class="px-6 py-4 whitespace-nowrap">${n.type==="MAIN"?"Principal":"Paquete"}</td>
            <td class="px-6 py-4 whitespace-nowrap">${g(n.price)}</td>
            <td class="px-6 py-4 whitespace-nowrap">
                <button class="text-indigo-600 hover:text-indigo-800 text-sm edit-product-btn" data-product-id="${n.producto_id}">
                    <i class="fas fa-edit"></i> Editar
                </button>
                <button class="text-red-600 hover:text-red-800 text-sm delete-product-btn ml-3" data-product-id="${n.producto_id}">
                    <i class="fas fa-trash"></i> Eliminar
                </button>
            </td>
        </tr>
    `).join(""),document.querySelectorAll(".delete-product-btn").forEach(n=>{n.addEventListener("click",a=>{const o=a.currentTarget.dataset.productId;J(o)})})}async function j(t){t.preventDefault();const e=document.getElementById("new-client-name").value.trim(),r=document.getElementById("new-client-phone").value.trim();if(!e){alert("El nombre del cliente es obligatorio.");return}try{const{error:n}=await c.from("clientes").insert([{name:e,contact:r||null}]);if(n)throw n;alert("Cliente registrado exitosamente!"),v("new-client-modal"),B()}catch(n){console.error("Error al registrar cliente:",n),alert(`Fallo el registro del cliente. Error: ${n.message}`)}}async function U(t){if(!t)return;const{data:e,error:r}=await c.from("clientes").select("*").eq("client_id",t).single();if(r){console.error("Error al cargar cliente para edici贸n:",r),alert(`Error al cargar cliente: ${r.message}`);return}document.getElementById("edit-client-id").value=e.client_id,document.getElementById("edit-client-name").value=e.name,document.getElementById("edit-client-phone").value=e.phone||"",document.getElementById("edit-client-modal-title").textContent=`Editar Cliente: ${e.name}`,b("edit-client-modal")}async function z(t){t.preventDefault();const e=document.getElementById("edit-client-id").value,r=document.getElementById("edit-client-name").value.trim(),n=document.getElementById("edit-client-phone").value.trim();if(!e||!r){alert("Nombre del cliente es obligatorio.");return}try{const{error:a}=await c.from("clientes").update({name:r,phone:n||null}).eq("client_id",e);if(a)throw a;alert(`隆Cliente ${r} actualizado exitosamente!`),v("edit-client-modal"),$(),C()}catch(a){console.error("Error al editar cliente:",a),alert(`Fallo la edici贸n del cliente. Error: ${a.message}`)}}async function J(t){if(t&&confirm("驴Est谩s seguro de que deseas eliminar este producto? Esta acci贸n es irreversible y podr铆a afectar ventas hist贸ricas."))try{const{error:e}=await c.from("productos").delete().eq("producto_id",t);if(e)throw e;alert("Producto eliminado exitosamente."),F()}catch(e){console.error("Error al eliminar producto:",e),alert(`Fallo la eliminaci贸n del producto. Error: ${e.message}`)}}async function V(t){t.preventDefault();const e=document.getElementById("new-product-name").value.trim(),r=parseFloat(document.getElementById("new-product-price").value),n=document.getElementById("new-product-type").value,a=document.getElementById("new-product-description").value.trim();try{const{error:o}=await c.from("productos").insert([{name:e,price:r,type:n,description:a||null,parent_product:null}]);if(o)throw o;alert(`隆${e} registrado exitosamente!`);const l=document.getElementById("modal-title-product");l&&(l.textContent="Registrar Nuevo Producto"),v("new-product-modal"),F(),I=[]}catch(o){console.error("Error al registrar producto:",o),alert(`Fallo el registro del producto. Error: ${o.message}`)}}async function Y(t){var i;if(!t)return;const{data:e,error:r}=await c.from("ventas").select(`
            total_amount, 
            paid_amount,
            client_id,
            ventas_client_id_fkey (name) 
        `).eq("venta_id",t).single();if(r||!e){console.error("Error al cargar datos de venta para pago:",r),alert("No se pudo cargar la informaci贸n de la deuda.");return}const n=parseFloat(e.total_amount)||0,a=parseFloat(e.paid_amount)||0,o=n-a;if(o<=0){alert("Esta venta ya no tiene deuda pendiente.");return}document.getElementById("payment-venta-id").value=t,document.getElementById("payment-client-id").value=e.client_id,document.getElementById("payment-client-name").textContent=((i=e.ventas_client_id_fkey)==null?void 0:i.name)||"Cliente Desconocido",document.getElementById("payment-current-debt").textContent=g(o);const l=document.getElementById("payment-amount");l.setAttribute("max",o.toFixed(2)),l.value=o.toFixed(2),b("payment-modal")}async function X(t){t.preventDefault();const e=document.getElementById("payment-venta-id").value,r=document.getElementById("payment-client-id").value,n=parseFloat(document.getElementById("payment-amount").value),a=document.getElementById("payment-method").value,o=document.getElementById("payment-current-debt").textContent;if(!e||!r||n<=0){alert("Datos incompletos o monto inv谩lido.");return}const{data:l,error:i}=await c.from("ventas").select("total_amount, paid_amount").eq("venta_id",e).single();if(i){console.error("Error al obtener venta para actualizar:",i),alert("Error al obtener datos de venta.");return}const s=parseFloat(l.total_amount)||0,u=parseFloat(l.paid_amount)||0,m=s-u;if(n>m){alert(`El monto del abono (${g(n)}) supera la deuda pendiente (${o}).`);return}const y=u+n;try{const{error:d}=await c.from("pagos").insert([{venta_id:e,client_id:r,amount:n,metodo_pago:a}]);if(d)throw d;const{error:p}=await c.from("ventas").update({paid_amount:y}).eq("venta_id",e);if(p)throw p;alert(`隆Abono de ${g(n)} registrado exitosamente!`),v("payment-modal"),B()}catch(d){console.error("Error al registrar abono:",d),alert(`Fallo el registro del abono. Error: ${d.message}`)}}async function K(t){t.preventDefault();const e=t.target,r=e.querySelector("#sale-client-select").value,n=parseFloat(e.querySelector("#sale-payment-amount").value)||0,a=e.querySelector("#sale-payment-method").value;if(!r){alert("Por favor, selecciona un cliente.");return}const o=[];let l=0;const i=e.querySelector("#subproduct-select"),s=e.querySelector("#sale-quantity"),u=e.querySelector("#sale-price"),m=i==null?void 0:i.value,y=parseFloat(s==null?void 0:s.value)||0,d=parseFloat(u==null?void 0:u.value)||0;if(m&&y>0&&d>=0&&(o.push({producto_id:m,quantity:y,price_at_sale:d}),l=y*d),o.length===0){alert("Por favor, selecciona un Paquete/Subcategor铆a v谩lido, cantidad y precio.");return}if(n>l){alert("El monto pagado no puede ser mayor que el total de la venta.");return}const p=l,f=n;try{const{data:h,error:E}=await c.from("ventas").insert([{client_id:r,total_amount:p,paid_amount:f}]).select("venta_id").single();if(E||!h){console.error("Error al insertar venta:",E),alert(`Error al registrar la venta: ${(E==null?void 0:E.message)||"Desconocido"}`);return}const _=h.venta_id,L=o.map(w=>({venta_id:_,producto_id:w.producto_id,quantity:w.quantity,price_at_sale:w.price_at_sale})),{error:S}=await c.from("ventas_productos").insert(L);if(S){console.error("Error al insertar detalles de venta:",S),alert(`Error al registrar el detalle de la venta: ${S.message}`);return}if(f>0){const{error:w}=await c.from("pagos").insert([{venta_id:_,amount:f,client_id:r,note:`M茅todo: ${a}`}]);w&&(console.error("Error al registrar pago inicial:",w),alert(`Error al registrar el pago inicial: ${w.message}`))}alert("Venta registrada exitosamente. Deuda calculada."),v("new-sale-modal"),await B()}catch(h){console.error("Error general en la venta:",h),alert("Ocurri贸 un error inesperado al registrar la venta.")}}async function Z(t,e){if(!t)return;const r=!e,n=r?"habilitar":"inhabilitar";if(confirm(`驴Est谩s seguro de que deseas ${n} a este cliente?`))try{const{error:a}=await c.from("clientes").update({is_active:r}).eq("client_id",t);if(a)throw a;alert(`Cliente ${r?"habilitado":"inhabilitado"} exitosamente.`),$(),C()}catch(a){console.error(`Error al ${n} cliente:`,a),alert(`Fallo al ${n} cliente. Error: ${a.message}`)}}function M(){const t=document.getElementById("main-product-select"),e=document.getElementById("subproduct-select"),r=document.getElementById("sale-price");if(!t||!e||!r)return;const n=t.options[t.selectedIndex].textContent;e.innerHTML='<option value="" data-price="0" disabled selected>Cargando opciones...</option>',e.disabled=!0,r.value="0.00";let a=[],o=null;if(a=I.filter(l=>l.type==="PACKAGE"&&l.parent_product===n),o=I.find(l=>l.name===n&&l.type==="MAIN"),a.length>0&&(e.innerHTML='<option value="" data-price="0" disabled selected>Seleccione un Paquete</option>',a.forEach(l=>{const i=document.createElement("option");i.value=l.producto_id,i.textContent=`${l.name} (Paquete) - ${g(l.price)}`,i.dataset.price=l.price,e.appendChild(i)})),o){const l=document.createElement("option");l.value=o.producto_id,l.textContent=`[Precio Base] - ${g(o.price)}`,l.dataset.price=o.price,e.appendChild(l),a.length===0&&(e.value=o.producto_id)}e.disabled=!1,x()}function x(){const t=document.getElementById("subproduct-select"),e=document.getElementById("sale-quantity"),r=document.getElementById("sale-price"),n=document.getElementById("sale-total-amount"),a=document.getElementById("sale-debt-display"),o=document.getElementById("sale-payment-amount");let l=0;const i=parseFloat(e==null?void 0:e.value)||0;let s=parseFloat(r==null?void 0:r.value)||0;const u=parseFloat(o==null?void 0:o.value)||0;if(t!=null&&t.value&&i>0){if(s===0||r.value.trim()===""){const y=t.selectedOptions[0];s=parseFloat(y==null?void 0:y.dataset.price)||0,s>=0&&(r.value=s.toFixed(2))}l=i*s}const m=Math.max(0,l-u);n&&(n.textContent=g(l)),a&&(a.textContent=g(m))}document.addEventListener("DOMContentLoaded",()=>{var t,e,r,n,a,o,l,i,s,u,m,y;(t=document.getElementById("login-form"))==null||t.addEventListener("submit",D),(e=document.getElementById("logout-button"))==null||e.addEventListener("click",P),(r=document.getElementById("edit-client-form"))==null||r.addEventListener("submit",z),(n=document.getElementById("new-sale-form"))==null||n.addEventListener("submit",K),(a=document.getElementById("new-client-form"))==null||a.addEventListener("submit",j),(o=document.getElementById("new-product-form"))==null||o.addEventListener("submit",V),(l=document.getElementById("payment-form"))==null||l.addEventListener("submit",X),(i=document.getElementById("open-new-sale-modal"))==null||i.addEventListener("click",async()=>{var d,p,f,h;try{await C(),await k();const E=document.getElementById("main-product-select");E.innerHTML='<option value="" disabled selected>Seleccione Producto Principal</option>',I.filter(_=>_.type==="MAIN").forEach(_=>{const L=document.createElement("option");L.textContent=_.name,E.appendChild(L)}),E.addEventListener("change",M),(d=document.getElementById("subproduct-select"))==null||d.addEventListener("change",x),(p=document.getElementById("sale-quantity"))==null||p.addEventListener("input",x),(f=document.getElementById("sale-price"))==null||f.addEventListener("input",x),(h=document.getElementById("sale-payment-amount"))==null||h.addEventListener("input",x),x(),b("new-sale-modal")}catch(E){console.error("Error al cargar datos de selects:",E),alert("Error al cargar los datos de clientes/productos. Revise la consola (F12).")}}),(s=document.getElementById("open-admin-products-modal"))==null||s.addEventListener("click",async d=>{d.preventDefault();try{await F(),b("admin-products-modal")}catch(p){console.error("Error al cargar la lista de productos:",p),alert("Error al cargar los productos. Revise la consola para detalles.")}}),(u=document.getElementById("open-new-client-modal"))==null||u.addEventListener("click",()=>{b("new-client-modal")}),(m=document.getElementById("open-new-product-modal"))==null||m.addEventListener("click",()=>{b("new-product-modal")}),(y=document.getElementById("open-admin-clients-modal"))==null||y.addEventListener("click",async d=>{d.preventDefault(),await $(),b("admin-clients-modal")}),document.querySelectorAll("[data-close-modal]").forEach(d=>{d.addEventListener("click",p=>{p.preventDefault();const f=d.getAttribute("data-close-modal");v(f)})}),document.addEventListener("click",d=>{document.querySelectorAll(".modal-overlay:not(.hidden)").forEach(f=>{d.target===f&&v(f.id)})}),document.addEventListener("keydown",d=>{if(d.key==="Escape"){const p=document.querySelectorAll(".modal-overlay:not(.hidden)"),f=p[p.length-1];f&&v(f.id)}}),q()});
